get:
  summary: Fetch shifts with related collections
  description: |
    Endpoint for fetching data from multiple collections related to shifts.
  parameters:
    - name: collections
      description: |
        **Shifts**: Fetch shifts in interval. Will also fetch orphaned* shifts if Timereports are included in the request.  
        **Inquiries**: Fetch inquriries in interval. Will also fetch orphaned* inquiries.  
        **Timereports**: Fetch timereports in interval. Will also fetch orphaned* timereports.  
        **Approvals**: Fetch approvals related to fetched timereports. Requires timereports to be included as in query.
        **Availabilties**: Fetch availabilities in interval
        
        \* *An item not in the current interval, but related to a shift, timereport, or inquiry.*
        
      in: query
      required: true
      schema:
        type: array
        example: '["timereports", "approvals", "inquiries", "availabilities"]'
        items:
          type: string
          enum:
            - timereports
            - inquiries
            - approvals
            - availabilities
    - name: from
      in: query
      required: true
      description: Start of the interval
      schema:
        type: string
        example: '2020-01-01'
    - name: to
      in: query
      required: true
      description: End of the interval
      schema:
        type: string
        example: '2020-01-07'
  tags:
    - Shift
  responses:
    '200':
      description: Data from multiple collections
      content:
        application/json:
          schema:
            type: object
            properties:
              shifts:
                $ref: "#/components/schemas/Shift"
              timereports:
                $ref: "#/components/schemas/Timereport"
              approvals:
                $ref: "#/components/schemas/Approval"
              inquiries:
                $ref: "#/components/schemas/Inquiry"
              availabilities:
                $ref: "#/components/schemas/Availability"
          example: {
            shifts: [],
            timereports: [],
            approvals: [],
            inquiries: [],
            availabilities: []
          }
